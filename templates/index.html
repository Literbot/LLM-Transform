<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='index.js') }}"></script>
</head>
<body>
    <div class="container">
        <h1>{{ title }}</h1>

        <form id="codeForm" class="form-box">
            <label for="source_lang">初始語言:</label>
            <select id="source_lang" required>
                <option value="Python">Python</option>
                <option value="JavaScript">JavaScript</option>
            </select>

            <label for="target_lang">目標語言:</label>
            <select id="target_lang" required>
                <option value="Python">Python</option>
                <option value="JavaScript">JavaScript</option>
            </select>

            <label for="model">選擇模型:</label>
            <select id="model" required>
                <option value="huggingface">Hugging Face (bigcode/StarCoder2-3B)</option>
                <option value="openai">OpenAI (GPT-3/GPT-4)</option>
            </select>

            <div id="apikey_section" style="display:none;">
                <label for="openai_key">OpenAI API 金鑰:</label>
                <input type="password" id="openai_key" placeholder="sk-xxxx...">
            </div>

            <label for="code">程式碼:</label>
            <textarea id="code" rows="10" cols="50" required></textarea>

            <button type="submit">轉換程式碼</button>
        </form>

        <h3>轉換結果:</h3>
        <div id="result-box"></div>
    </div>

    <script>
        document.getElementById("model").addEventListener("change", function () {
            const selected = this.value;
            const apikeyField = document.getElementById("apikey_section");
            apikeyField.style.display = selected === "openai" ? "block" : "none";
        });
    </script>
</body>
</html>
